(this["webpackJsonpkapusta-bl3-front"]=this["webpackJsonpkapusta-bl3-front"]||[]).push([[4],{20:function(t,e,n){"use strict";n.r(e),n.d(e,"getIsAuth",(function(){return r})),n.d(e,"getUserEmail",(function(){return a})),n.d(e,"getIsFetchingCurrent",(function(){return c})),n.d(e,"getToken",(function(){return u})),n.d(e,"getAuthenticated",(function(){return i}));var r=function(t){return t.auth.isAuth},a=function(t){return t.auth.user.email},c=function(t){return t.auth.isFetchingCurrentUser},u=function(t){return t.auth.token},i=function(t){return t.auth.isAuthenticated}},23:function(t,e,n){t.exports={navList:"Navigation_navList__34Hdo",navLink:"Navigation_navLink__6Y4w9"}},30:function(t,e,n){"use strict";var r,a=n(7),c=n(11),u=n(6),i=Object(c.c)({name:"auth",initialState:{user:{email:"",password:""},token:"",error:null,isLoading:!1,isAuth:!1,isFetchCurrentUser:!1},extraReducers:(r={},Object(a.a)(r,u.d.fulfilled,(function(t,e){t.user.email=e.payload.email,t.isAuth=!1,t.isLoading=!1})),Object(a.a)(r,u.d.pending,(function(t){t.isLoading=!0,t.error=null})),Object(a.a)(r,u.d.rejected,(function(t,e){t.error=e.payload,t.isLoading=!1})),Object(a.a)(r,u.b.fulfilled,(function(t,e){t.user.email=e.payload.email,t.token=e.payload.token,t.isAuth=!0,t.isLoading=!1})),Object(a.a)(r,u.b.pending,(function(t){t.isLoading=!0,t.error=null})),Object(a.a)(r,u.b.rejected,(function(t,e){t.error=e.payload,t.isAuth=!1,t.isLoading=!1})),Object(a.a)(r,u.c.fulfilled,(function(t){t.user.email=null,t.token=null,t.isAuth=!1,t.isLoading=!1})),Object(a.a)(r,u.c.pending,(function(t){t.isLoading=!0,t.error=null})),Object(a.a)(r,u.c.rejected,(function(t,e){t.error=e.payload,t.isLoading=!1})),Object(a.a)(r,u.a.fulfilled,(function(t,e){t.user.email=e.payload.email,t.isFetchCurrentUser=!1,t.isAuth=!0,t.isLoading=!1})),Object(a.a)(r,u.a.pending,(function(t){t.isFetchCurrentUser=!0,t.isLoading=!0,t.error=null})),Object(a.a)(r,u.a.rejected,(function(t,e){t.error=e.payload,t.isLoading=!1,t.isAuth=!1,t.isFetchCurrentUser=!1})),r)});e.a=i.reducer},48:function(t,e,n){},49:function(t,e,n){},6:function(t,e,n){"use strict";n.d(e,"d",(function(){return g})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return k})),n.d(e,"a",(function(){return y}));var r=n(12),a=n(4),c=n.n(a),u=n(11),i=n(15),s=n(16),o=n.n(s);o.a.defaults.baseURL="https://kapusta-smart-finances.herokuapp.com/";var l=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){o.a.defaults.headers.common.Authorization=""};function j(t){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("api/auth/registration",e);case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return(f=Object(r.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("api/auth/login ",e);case 2:return n=t.sent,l(n.data.data.token),t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("api/auth/logout");case 2:b();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return v.apply(this,arguments)}function v(){return(v=Object(r.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(e),t.next=3,o.a.get("/users/current");case 3:return n=t.sent,t.abrupt("return",n.data.data);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var g=Object(u.b)("users/register",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,j(e);case 4:return a=t.sent,a.isSendEmailVerify?Object(i.b)("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 email"):Object(i.b)("\u0415\u0449\u0435 \u0440\u0430\u0437 \u043f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e"),t.abrupt("return",a);case 10:t.prev=10,t.t0=t.catch(1),r(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),x=Object(u.b)("users/login",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,d(e);case 4:return a=t.sent,Object(i.b)("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u043b\u043e\u0433\u0438\u043d\u0438\u043b\u0438\u0441\u044c!"),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(1),Object(i.b)("\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e"),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),k=Object(u.b)("users/logout",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,h();case 4:Object(i.b)("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0440\u0430\u0437\u043b\u043e\u0433\u0438\u043d\u0438\u043b\u0438\u0441\u044c"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),y=Object(u.b)("users/currentUser",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var r,a,u,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.rejectWithValue,a=n.getState,u=a(),i=u.auth.token){t.next=5;break}return t.abrupt("return",r("Token Error"));case 5:return t.prev=5,t.next=8,m(i);case 8:return s=t.sent,t.abrupt("return",s);case 12:return t.prev=12,t.t0=t.catch(5),t.abrupt("return",r(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}())},95:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(19),u=n.n(c),i=(n(48),n(49),n(27)),s=n.n(i),o=n(2),l=n(1);function b(t){var e=t.isAuth,n=t.component;return Object(l.jsx)(l.Fragment,{children:e?Object(l.jsx)(n,{}):Object(l.jsx)(o.a,{to:"/"})})}function j(t){var e=t.isAuth,n=t.component;return Object(l.jsx)(l.Fragment,{children:e?Object(l.jsx)(o.a,{to:"/main"}):Object(l.jsx)(n,{})})}var p=n(18),d=n(6),f=n(20),h=n(15),O=(n(92),n(13)),m=n(23),v=n.n(m);function g(){return Object(l.jsxs)("nav",{className:v.a.navList,children:[Object(l.jsx)(O.c,{to:"/",className:v.a.navLink,children:"Home"}),Object(l.jsx)(O.c,{to:"/main",className:v.a.navLink,children:"Main"}),Object(l.jsx)(O.c,{to:"/statistics",className:v.a.navLink,children:"Stats"})]})}var x=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,508))})),k=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,505))})),y=Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(0)]).then(n.bind(null,504))})),w=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,506))}));var L=function(){var t=Object(p.b)(),e=Object(p.c)(f.getIsAuth),n=Object(p.c)(f.getToken),a=Object(p.c)(f.getIsFetchingCurrent);return Object(r.useEffect)((function(){n&&t(Object(d.a)())}),[t]),Object(l.jsxs)("div",{className:"appContainer",children:[Object(l.jsx)(g,{}),Object(l.jsxs)(r.Suspense,{fallback:Object(l.jsx)(s.a,{type:"ThreeDots",color:"#ff751d",height:80,width:80}),children:[Object(l.jsx)(x,{isAuth:e}),a?Object(l.jsx)(s.a,{type:"ThreeDots",color:"#ff751d",height:80,width:80}):Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{path:"/",element:Object(l.jsx)(j,{isAuth:e,component:k})}),Object(l.jsx)(o.b,{path:"/main",element:Object(l.jsx)(b,{isAuth:e,component:y})}),Object(l.jsx)(o.b,{path:"statistics",element:Object(l.jsx)(b,{isAuth:e,component:w})})]})]}),Object(l.jsx)(h.a,{autoClose:3e3})]})},A=n(42),C=n(11),F=n(30),N=n(14),U=n(40),z=n.n(U),I=Object(A.a)(Object(C.d)({serializableCheck:{ignoredActions:[N.a,N.f,N.b,N.c,N.d,N.e]}})),S={key:"auth",storage:z.a,whitelist:["token"]},T=Object(C.a)({reducer:{auth:Object(N.g)(S,F.a)},middleware:I,devTools:!0}),_=Object(N.h)(T),E=n(41);u.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(p.a,{store:T,children:Object(l.jsx)(E.a,{loader:"LOADING...",persistor:_,children:Object(l.jsx)(O.a,{children:Object(l.jsx)(L,{})})})})}),document.getElementById("root"))}},[[95,5,7]]]);
//# sourceMappingURL=main.239ff2fc.chunk.js.map